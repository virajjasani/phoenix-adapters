# Configuration
status = WARN
name = PhoenixShim

# Properties
property.LOG_PATTERN = %d{ISO8601} %-5p [%t] %c{2}: %.1000m%n
property.LOG_DIR = ${sys:phoenix.shim.log.dir:-./logs}
property.LOG_FILE = ${sys:phoenix.shim.log.file:-phoenix-shim.log}
property.MAX_FILE_SIZE = 256MB
property.MAX_BACKUP_INDEX = 20

# Console Appender
appender.console.type = Console
appender.console.name = Console
appender.console.target = SYSTEM_ERR
appender.console.layout.type = PatternLayout
appender.console.layout.pattern = ${LOG_PATTERN}

# Daily Rolling File Appender (DRFA)
appender.drfa.type = RollingFile
appender.drfa.name = DRFA
appender.drfa.fileName = ${LOG_DIR}/${LOG_FILE}
appender.drfa.filePattern = ${LOG_DIR}/${LOG_FILE}.%d{yyyy-MM-dd}
appender.drfa.layout.type = PatternLayout
appender.drfa.layout.pattern = ${LOG_PATTERN}
appender.drfa.policies.type = Policies
appender.drfa.policies.time.type = TimeBasedTriggeringPolicy
appender.drfa.policies.time.interval = 1
appender.drfa.policies.time.modulate = true
appender.drfa.policies.size.type = SizeBasedTriggeringPolicy
appender.drfa.policies.size.size = ${MAX_FILE_SIZE}
appender.drfa.strategy.type = DefaultRolloverStrategy
appender.drfa.strategy.max = ${MAX_BACKUP_INDEX}

# Security Audit Appender (RFAS)
appender.rfas.type = RollingFile
appender.rfas.name = RFAS
appender.rfas.fileName = ${LOG_DIR}/SecurityAuth.audit
appender.rfas.filePattern = ${LOG_DIR}/SecurityAuth.audit.%i
appender.rfas.layout.type = PatternLayout
appender.rfas.layout.pattern = ${LOG_PATTERN}
appender.rfas.policies.type = Policies
appender.rfas.policies.size.type = SizeBasedTriggeringPolicy
appender.rfas.policies.size.size = ${MAX_FILE_SIZE}
appender.rfas.strategy.type = DefaultRolloverStrategy
appender.rfas.strategy.max = ${MAX_BACKUP_INDEX}

# GC Log Appender (GCLog)
appender.gclog.type = RollingFile
appender.gclog.name = GCLog
appender.gclog.fileName = ${LOG_DIR}/gc.log
appender.gclog.filePattern = ${LOG_DIR}/gc.log.%i
appender.gclog.layout.type = PatternLayout
appender.gclog.layout.pattern = %m%n
appender.gclog.policies.type = Policies
appender.gclog.policies.size.type = SizeBasedTriggeringPolicy
appender.gclog.policies.size.size = ${MAX_FILE_SIZE}
appender.gclog.strategy.type = DefaultRolloverStrategy
appender.gclog.strategy.max = ${MAX_BACKUP_INDEX}

# HTTP Access Log Appender (AccessLog)
appender.accesslog.type = RollingFile
appender.accesslog.name = AccessLog
appender.accesslog.fileName = ${LOG_DIR}/access.log
appender.accesslog.filePattern = ${LOG_DIR}/access.log.%i
appender.accesslog.layout.type = PatternLayout
appender.accesslog.layout.pattern = %m%n
appender.accesslog.policies.type = Policies
appender.accesslog.policies.size.type = SizeBasedTriggeringPolicy
appender.accesslog.policies.size.size = 200MB
appender.accesslog.strategy.type = DefaultRolloverStrategy
appender.accesslog.strategy.max = 10

# Null Appender
appender.null.type = Null
appender.null.name = NullAppender

# Loggers

# Root Logger
rootLogger.level = ${sys:phoenix.shim.root.logger:-INFO}
rootLogger.appenderRef.console.ref = Console
rootLogger.appenderRef.drfa.ref = DRFA

# Security Logger
logger.security.name = SecurityLogger
logger.security.level = ${sys:phoenix.shim.security.logger:-INFO}
logger.security.additivity = false
logger.security.appenderRef.rfas.ref = RFAS

# HTTP Access Logger
logger.httprequests.name = http.requests
logger.httprequests.level = INFO
logger.httprequests.additivity = false
logger.httprequests.appenderRef.accesslog.ref = AccessLog

# GC Logger
logger.gc.name = GC
logger.gc.level = INFO
logger.gc.additivity = false
logger.gc.appenderRef.gclog.ref = GCLog

# Custom Logging Levels
logger.zk.name = org.apache.zookeeper
logger.zk.level = ERROR

logger.hbase.name = org.apache.hadoop.hbase
logger.hbase.level = INFO

logger.phoenix.name = org.apache.phoenix
logger.phoenix.level = INFO

logger.phoenixddb.name = org.apache.phoenix.ddb
logger.phoenixddb.level = DEBUG

# Metrics Logging
logger.metricsconfig.name = org.apache.hadoop.metrics2.impl.MetricsConfig
logger.metricsconfig.level = WARN

logger.metricssink.name = org.apache.hadoop.metrics2.impl.MetricsSinkAdapter
logger.metricssink.level = WARN

logger.metricssystem.name = org.apache.hadoop.metrics2.impl.MetricsSystemImpl
logger.metricssystem.level = WARN
